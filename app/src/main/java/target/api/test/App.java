/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package target.api.test;

// public class App {
//     public String getGreeting() {
//         return "Hello World!";
//     }

//     public static void main(String[] args) {
//         System.out.println(new App().getGreeting());
//     }
// }

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Scanner;
// import com.fasterxml.jackson.databind.ObjectMapper;
// import com.fasterxml.jackson.*;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonParser;
import com.google.gson.JsonElement;

class App {

	public static void main(String[] args) throws IOException {
		URL url = new URL("https://redsky.target.com/redsky_aggregations/v1/web/plp_search_v1?key=9f36aeafbe60771e321a7cc95a78140772ab3e96&category=5xtkh&channel=WEB&count=24&default_purchasability_filter=true&include_sponsored=true&offset=0&page=%2Fc%2F5xtkh&platform=desktop&pricing_store_id=341&scheduled_delivery_store_id=341&store_ids=341%2C349%2C1947%2C1205%2C342&useragent=Mozilla%2F5.0+%28Macintosh%3B+Intel+Mac+OS+X+10_15_7%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F103.0.0.0+Safari%2F537.36&visitor_id=01823BB0E2670201A0107E13D7735780");
		HttpURLConnection httpConn = (HttpURLConnection) url.openConnection();
		httpConn.setRequestMethod("GET");

		httpConn.setRequestProperty("authority", "redsky.target.com");
		httpConn.setRequestProperty("accept", "application/json");
		httpConn.setRequestProperty("accept-language", "en-US,en;q=0.9");
		httpConn.setRequestProperty("cache-control", "no-cache");
		httpConn.setRequestProperty("cookie", "TealeafAkaSid=XqwRwPQoIMsBc-Yv9vnrUEoSmU5vqk5t; visitorId=01823BB0E2670201A0107E13D7735780; sapphire=1; UserLocation=98466|47.220|-122.500|WA|US; __gads=ID=1346291daccb6479-2227bce93ed4002b:T=1658858825:S=ALNI_MbtlwmhatHhAem66d0ismJMgUBrkw; __gpi=UID=0000076556ad408f:T=1658858825:RT=1658858825:S=ALNI_MYvl6nHMh7dNYYbb0tER67BiksTTA; egsSessionId=21f3744c-071d-437c-9091-86c3be235dfb; accessToken=eyJraWQiOiJlYXMyIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiI1YjNkZGQ2Yy1mY2NmLTRkZmItOTMxNS02YzJjOTc5OTQzYWMiLCJpc3MiOiJNSTYiLCJleHAiOjE2NTg5NDUyMjUsImlhdCI6MTY1ODg1ODgyNSwianRpIjoiVEdULmY3ZTE2YjhkNmM4MzRiMDg4ZDU5MmRiM2FiNjExYTJlLWwiLCJza3kiOiJlYXMyIiwic3V0IjoiRyIsImRpZCI6IjA5NDExMjhjMDlhY2U2YmVhOWRkNTcwYWI3NmUwZTE4NjVlNTYwNWFhNzEyNWU5ODE3ZGZjZmVhOGM0MTliMGUiLCJzY28iOiJlY29tLm5vbmUsb3BlbmlkIiwiY2xpIjoiZWNvbS13ZWItMS4wLjAiLCJhc2wiOiJMIn0.tarizQ0n1GKoWp8Qft9orV-Yx9wit4ym1YReV2XJYW-AJ3J3C6poljSFqDsWRHYXHIOvhSM_Xl3liLT1SRebnkfok_8H5gk85YTa2YDbOOAlBDVbxRCLODIpADCoBUNKWjQwrrDREkLsxqY16LyT3AP7csM-Vjl0Y46KU8t5B2HP16VV7qN4J7lKeimkQg4XzFKpVRPpSjtRX4RML9QYuWcN6sMzk_vhcGugzMGaYGMATU1FjsWkS6Anq6b-rKbKY7mRYfGYLFCFr_ex2mDp0V-hCv8uzXEaUZaufKgXkLX0zRJijFiQTylZGhxW3mid3V86-zEdmV3lX723at-93g; idToken=eyJhbGciOiJub25lIn0.eyJzdWIiOiI1YjNkZGQ2Yy1mY2NmLTRkZmItOTMxNS02YzJjOTc5OTQzYWMiLCJpc3MiOiJNSTYiLCJleHAiOjE2NTg5NDUyMjUsImlhdCI6MTY1ODg1ODgyNSwiYXNzIjoiTCIsInN1dCI6IkciLCJjbGkiOiJlY29tLXdlYi0xLjAuMCIsInBybyI6eyJmbiI6bnVsbCwiZW0iOm51bGwsInBoIjpmYWxzZSwibGVkIjpudWxsLCJsdHkiOmZhbHNlfX0.; refreshToken=F8m2qQX4YKedXsdNJE-DaYjMzpp8AC-nROnKY_qBBgUkP1TSTsgBmMBGKKIL9ywX6DaStYMF9T25Jj5gfqqluw; ffsession={%22sessionHash%22:%228dc18c9071b4d1658858824645%22%2C%22prevPageName%22:%22home%20page%22%2C%22prevPageType%22:%22home%20page%22%2C%22prevPageUrl%22:%22https://www.target.com/%22%2C%22sessionHit%22:1}; fiatsCookie=DSI_341|DSN_North%20Tacoma|DSZ_98405; ci_pixmgr=other; _uetsid=c1d1eef00d0d11eda903c7aaf471edf7; _uetvid=c1d1efa00d0d11edbad4b71595f1132a; _gcl_au=1.1.1547614187.1658858826; _mitata=ZmNlMGQ0NGE2NWY1YjkxNmM2MmYwOTFhNWRhYTJmNzg2Njc1YzY2ODY0ZjFmYmMxYjRiNmM0ODUwOTEzOTlmYw==_/@#/1658858885_/@#/cXczUQT7plA1CjxL_/@#/MjhhNWNkZWFmMjUzZGQ5ODk0MjY1NmJkZTE3MmVlNjc1NzZjMzQyZWNiOWZkYWZjYWE4ZTdkZDIyNTEzMmVkZg==_/@#/000");
		httpConn.setRequestProperty("origin", "https://www.target.com");
		httpConn.setRequestProperty("pragma", "no-cache");
		httpConn.setRequestProperty("referer", "https://www.target.com/c/formula-nursing-feeding-baby/-/N-5xtkh?lnk=snav_rd_formula");
		httpConn.setRequestProperty("sec-ch-ua", "\".Not/A)Brand\";v=\"99\", \"Google Chrome\";v=\"103\", \"Chromium\";v=\"103\"");
		httpConn.setRequestProperty("sec-ch-ua-mobile", "?0");
		httpConn.setRequestProperty("sec-ch-ua-platform", "\"macOS\"");
		httpConn.setRequestProperty("sec-fetch-dest", "empty");
		httpConn.setRequestProperty("sec-fetch-mode", "cors");
		httpConn.setRequestProperty("sec-fetch-site", "same-site");
		httpConn.setRequestProperty("user-agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36");

		InputStream responseStream = httpConn.getResponseCode() / 100 == 2
				? httpConn.getInputStream()
				: httpConn.getErrorStream();
		Scanner s = new Scanner(responseStream).useDelimiter("\\A");
		String response = s.hasNext() ? s.next() : "";
        // ObjectMapper objectMapper = new ObjectMapper();
        // objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(response);
        JsonElement jsonElement = new JsonParser().parse(response);
        Gson gson = new GsonBuilder().setPrettyPrinting().create();
        String json = gson.toJson(jsonElement);
        System.out.println(json);
	}
}